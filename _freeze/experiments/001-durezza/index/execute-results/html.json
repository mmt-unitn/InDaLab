{
  "hash": "5e02bd2b6a8a86466ebb4a40a8d9d6c9",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Esempio: misura durezza\"\nauthor: \"Tommaso Stefani\"\ndate: \"02/05/2025\"\n# date-modified: today\nformat: \n  html:\n    toc: true\ndraft: false\ncategories: \n  - materiali\nabstract: >\n  In questa attività si conducono misure di durezza superficiale per poi svolgere due indagini statistiche differenti (Test di Student accoppiato e taratura)\n---\n\n\n\n\n\n# Descrizione dell'attività\n\nLa presente attività ha lo scopo di introdurre alla misurazione della durezza dei materiali in ambito metallurgico e all'analisi statistica dei dati raccolti. In particolare, si acquisiranno le competenze necessarie per eseguire le procedure di laboratorio finalizzate alla misura della durezza. Successivamente, si condurranno due tipi di analisi statistiche sui dati ottenuti, ciascuna volta a esplorare due aspetti distinti dell'analisi dei dati:\n\n1.  Test di inferenza statistica: Test di Student accoppiato.\n2.  Taratura degli strumenti di misura: Sviluppo del modello analitico di uno strumento di misura e relativa regressione.\n\nQuesti due temi si prestano particolarmente bene a essere sviluppati nell'attività sperimentale proposta, in quanto sono applicabili alle seguenti situazioni rappresentative di contesti correnti:\n\n1.  T test accoppiato: Si sospetta che le anomalie riscontrate in alcune misure di durezza rispetto ai valori noti in letteratura o ricavati da un eventuale storico di produzione aziendale siano causate dall'utilizzo di un penetratore danneggiato.\n2.  Taratura: Si vuole indagare la relazione tra la misura di durezza stimata dalla sola penetrazione dell'indentore (fornita dal durometro utilizzato in laboratorio) e la durezza misurata tenendo conto delle diagonali dell'impronta dell'indentatore, come indicato da normativa.\n\nLa presente attività, quindi, affrontando tali tematiche, si compone delle seguenti fasi:\n\n-   Pianificazione della campagna di misure di durezza\n-   Realizzazione delle misure in laboratorio (contesto metallurgico)\n-   Analisi statistica dei dati e discussione dei risultati ottenuti\n\nPrima di presentare le modalità operative e l'analisi statistica del lavoro oggetto di studio, è necessario richiamare alcune nozioni teoriche fondamentali, sia relative alla scienza dei materiali che alla statistica.\n\n# Richiami teorici\n\n## La durezza\n\nLa durezza è la proprietà meccanica dei materiali che esprime la loro resistenza alla deformazione plastica locale, determinata mediante prove di penetrazione, graffiatura o abrasione. Essa rappresenta la capacità di un materiale ad opporsi alla formazione di impronte permanenti sotto l'azione di un corpo più duro.\n\nEsistono diverse tecniche per la valutazione quantitativa della durezza. Le più comuni e utilizzate prevedono l'impiego di un piccolo penetratore il quale viene forzato a penetrare attraverso la superficie del materiale da analizzare, secondo modalità di applicazione del carico e velocità di penetrazione controllate. La profondità o la dimensione dell'impronta che ne risulta viene poi misurata e da queste misure, attraverso formule stabilite dal metodo di prova adottato, si risale alla valutazione della durezza, espressa con un numero.\n\nE' importante sottolineare che le misure di durezza non sono valori assoluti ma relativi in quanto dipendono fortemente dal metodo di prova utilizzato (Brinell, Vickers, Rockwell, Mohs, ecc.) e dalle condizioni di prova. Per questo motivo quando si riporta un valore di durezza è indispensabile riportare la sigla che ne definisce la scala di riferimento. La sigla $350\\,\\mathrm{HV}\\,30\\,/\\,10$, per esempio, sta ad indicare una durezza di 350 stabilita con il metodo Vickers, usando un carico di 30 kgf applicato per un tempo di 10 secondi.\n\nTrattandosi di una grandezza empirica (non esprimibile con una propria unità di misura), la durezza non è direttamente derivabile da altre proprietà fisiche fondamentali, ma dipende da fattori quali per esempio la microstruttura, la composizione chimica, il trattamento termico e le condizioni di prova. Va comunque detto che in molti materiali metallici (soprattutto acciai e leghe) esiste una certa correlazione empirica tra il valore di durezza (soprattutto Vickers o Brinell) e la tensione di rottura a trazione. Questa correlazione nasce dal fatto che entrambe le grandezze riflettono la resistenza del materiale alla deformazione plastica.\n\nAlla luce di quanto detto è evidente come non esista un metodo generale di conversione tra le diverse scale di misura della durezza (corrispondenti ai diversi metodi di prova utilizzati) ma solo tentativi di raffronto sperimentali.\n\nLe prove di durezza sono effettuate di frequente in quanto:\n\n1.  Sono semplici e poco costose: il campione non subisce particolari preparazioni preliminari e l'apparecchio di misura è poco costoso\n2.  La prova è di carattere non distruttivo: sul campione rimane solo una piccola impronta\n3.  Altre proprietà meccaniche possono essere dedotte (seppur approssimativamente) dalle misure di durezza (per esempio la resistenza a rottura)\n\nDi seguito si riportano le 3 scale di durezza più comuni per materiali metallici (compresi gli acciai), soffermandosi maggiormente sulla scala Vickers, adottata nelle misure del presente esperimento. Si illustra brevemente anche la scala Mohs, in quanto storicamente è stato il primo tentativo di comparare le diverse durezze dei materiali e tutt'ora viene utilizzata in determinati ambiti.\n\n### Scala Mohs\n\nLa scala di Mohs è un sistema ideato nel 1812 dal mineralogista tedesco Friedrich Mohs per classificare i materiali in base alla loro durezza, intesa come resistenza alla graffiatura. Si tratta di un metodo empirico e comparativo, che non fornisce un valore numerico assoluto, ma piuttosto consente di stabilire se un materiale è più o meno duro rispetto a un altro.\n\nLa scala è composta da dieci livelli, ognuno rappresentato da un minerale di riferimento, ordinati dal più tenero (il talco, al livello 1) al più duro (il diamante, al livello 10). Per esempio, il quarzo si trova al livello 7, e può graffiare tutti i materiali con durezza inferiore, ma non quelli più duri di lui.\n\nQuesto metodo è ancora oggi largamente utilizzato in geologia e mineralogia, dove è utile per un’identificazione rapida e pratica dei minerali sul campo o in laboratorio. Tuttavia, nel settore metallurgico e industriale, la scala Mohs ha un impiego molto più limitato, perché non permette misurazioni quantitative o confronti precisi. In quei contesti, infatti, si preferiscono metodi come Rockwell, Vickers o Brinell, che restituiscono valori numerici affidabili e ripetibili.\n\nIn sintesi, la scala di Mohs è uno strumento semplice ed efficace per valutare la durezza relativa tra materiali, ma non è adatta quando serve un dato tecnico rigoroso o confrontabile in ambito industriale.\n\n### Scala Rockwell\n\nLa prova Rockwell è un metodo basato sulla **misura della profondità residua** di penetrazione dopo l’applicazione di carichi normalizzati. È molto diffusa per la sua rapidità e semplicità.\n\nLa procedura prevede 3 fasi:\n\n-   preparazione dei campioni\n-   Applicazione di un **precarico** (10 kgf) per stabilizzare il contatto;\n-   Applicazione e successiva rimozione del **carico principale**, dopo cui si misura la profondità $h$ dell’impronta residua.\n\nIl valore di durezza Rockwell è calcolato mediante la formula:\n\n$$\nHR = N - \\frac{h}{s}\n$$\n\ndove: - $HR$ è il valore di durezza, - $h$ è la profondità residua dell’impronta (in mm), - $s = 0.002 \\, \\text{mm}$ è il coefficiente di scala, - $N$ è una costante che dipende dalla scala (es. $N = 100$ per la scala HRC).\n\nPer la scala Rockwell C:\n\n$$\nHRC = 100 - \\frac{h}{0.002} = 100 - 500h\n$$\n\nLe diverse scale Rockwell si distinguono principalemente per: - tipo di **penetratore** (cono in diamante o sfera di diverse dimensioni), - **carico totale** (da 60 a 150 kgf),\n\nLa procedura, le condizioni operative, la scelta della scala e le modalità di taratura sono dettagliatamente definite nella norma internazionale **UNI EN ISO 6508-1:2016**\n\n### Scala Brinell\n\nLa **prova Brinell** è un metodo ottico che misura la durezza di un materiale valutando la resistenza all’indentazione provocata da una **sfera in acciaio o carburo di tungsteno** sottoposta a un carico statico. E' una prova robusta che può essere applicata ad un ampio intervallo di durezze.\n\nDopo l’applicazione del carico, si misura il **diametro dell’impronta** residua. La durezza Brinell si calcola tramite:\n\n$$\nHBW = \\frac{2F}{\\pi D \\left( D - \\sqrt{D^2 - d^2} \\right)}\n$$\n\ndove: - $F$: carico applicato (kgf)\\\n- $D$: diametro della sfera (mm)\\\n- $d$: diametro medio dell’impronta (mm)\n\nLa procedura, le condizioni operative, la scelta della scala e le modalità di taratura sono dettagliatamente definite nella norma internazionale **UNI EN ISO 6506-1**\n\n### Scala Vickers\n\nLa prova Vickers è un metodo ottico per la determinazione della durezza dei materiali metallici, basato sulla misurazione delle dimensioni di un’impronta ottenuta tramite un penetratore piramidale in diamante. Il penetratore ha una geometria a base quadrata con un angolo di 136° tra le facce opposte. Durante la prova, si applica un carico statico definito, mantenuto per un determinato intervallo di tempo. Una volta rimosso il carico, si osserva l’impronta lasciata sulla superficie del campione.\n\nLa durezza viene determinata misurando otticamente le due diagonali dell’impronta, generalmente tramite un microscopio ottico con reticolo graduato o un sistema digitale di acquisizione. Il valore di durezza Vickers si calcola come rapporto tra il carico applicato e l’area della superficie dell’impronta, secondo la seguente formula:\n\n$$\nHV = \\frac{1.854 \\cdot F}{d^2}\n$$\n\ndove \\$ F \\$ è il carico applicato in kgf e \\$ d \\$ è la lunghezza media delle due diagonali dell’impronta, espressa in millimetri.\n\nTrattandosi di una misura ottica, la preparazione del campione è un aspetto fondamentale. La superficie da testare deve essere accuratamente levigata e lucidata, al fine di permettere una lettura chiara e precisa dell’impronta. Per questo motivo, la prova Vickers è particolarmente indicata per materiali metallici omogenei e per applicazioni su sezioni sottili o microstrutture, come nel caso delle microdurezze.\n\nLa scala Vickers è unica nella geometria del penetratore, ma varia in funzione del carico applicato, indicato accanto alla sigla HV. Ad esempio, la sigla **HV5** indica una prova eseguita con un carico di 5 kgf, **HV10** con 10 kgf, e così via. Questa specifica è fondamentale perché la dimensione dell’impronta e la risposta del materiale possono variare in base alla forza impiegata. I risultati ottenuti con carichi diversi **non sono sempre direttamente confrontabili**, specialmente su materiali eterogenei o trattati superficialmente.\n\nTutti i dettagli tecnici, i criteri di esecuzione e le tolleranze della prova sono regolati dalla norma **UNI EN ISO 6507-1**, che rappresenta il riferimento principale per l’applicazione corretta del metodo Vickers.\n\n## Test di student accoppiato (da finire)\n\nNel caso di test di Student a due campioni, quando essi **hanno la stessa dimensione e sono raccolti due a due in condizioni molto simili**, è opportuno accoppiarli e effettuare il test di Student accoppiato\n\nOgni misura è esprimibile come: $$\ny_{ij}=\\mu_i+\\beta_j+\\varepsilon_{ij};\\hspace{9pt} \\left\\{ \\begin{array}{l}i=1,2\\\\j=1,2,\\dots ,n\\end{array} \\right.\n$$ Se definisco $d_j=y_{1j} - y_{2j}$, ricordando le proprietà dell'operatore $E(\\cdot)$, risulta $\\mu_d = \\mu_1 - \\mu_2$. Quindi posso riformulare una coppia di ipotesi equivalenti: $$\n\\begin{eqnarray}\nH_0 :~& \\mu_d = 0 \\\\\nH_1 :~& \\mu_d \\neq 0\n\\end{eqnarray}\n$$ Quindi il test accoppiato è un test a un campione, con il vantaggio che **gli effetti casuali tra coppie di osservazioni non influiscono sul risultato del test**\n\n## Taratura\n\n\n*ancora da fare\n\n\n# Descrizione attrezzature\n\nLe attrezzature e i materiali necessari per eseguire le misure Vickers in laboratorio sono le seguenti:\n\n-   10 campioni di acciai ignoti (composizione non nota, trattamenti subiti non noti, ecc.)\n-   Carte abrasive: Non sono prescritte grane specifiche nelle normative, ma si consiglia di utilizzare una sequenza di abrasivi da grana 120 a 1200 per garantire una superficie liscia e priva di difetti\n-   detergente per superfici metalliche\n-   panno in microfibra o tessuto morbido che non rilasci fibre\n-   durometro per misurazione durezza VIckers\n-   penetatore Vickers danneggiato\n-   penetratore Vickers integro\n\n# Descrizione delle modalità operative dell'esperimento\n\n## Progettazione della campagna di misure\n\nPer eseguire le analisi statistiche volte ad affrontare le due tematiche descritte nella prima sezione del presente documento, è necessario effettuare le misure di durezza opportune. In particolare, sarà necessario raccogliere differenti misure di durezza per ciascuna delle due analisi. Di seguito vengono riportate le misure necessarie per entrambe le analisi, insieme alle motivazioni della loro scelta.\n\n### Test di student\n\nIl test statistico più adatto per attribuire un valore alla probabilità di errore nell'assumere falsa l'ipotesi nulla ($p$-value), secondo cui l'indentatore danneggiato non è responsabile delle deviazioni osservate nelle misurazioni, è il Test di Student accoppiato.\n\nSebbene si possano confrontare due campioni di misure rilevate sullo stesso materiale utilizzando i due intenditori, in quel caso sarebbe necessario un test di Student a due campioni indipendenti. Tuttavia, gli effetti stocastici nelle misure ridurrebbero la potenza del test. Con il test di Student accoppiato, invece, le differenze tra le misure eliminano gli effetti stocastici comuni, migliorando la potenza del test (a condizione che le stesse siano rappresentative dello stesso misurando e siano raccolte a due a due in condizioni molto simili).\n\nPer l'esperimento si scelgono 10 campioni di acciaio ignoto, misurando la durezza prima con l'indentatore integro e poi con l'indentatore danneggiato (cercando di estrapolare visivamente la posizione del vertice danneggaito dell'impronta).\n\nIl durometro presentein laboratorio, oltre a fornire la misura di durezza calcolata secondo normativa (utilizzando il valore del carico e delle diagonali lasciate dall'impronta dell'indentatore), fornisce anche una stima della durezza basata sulla profondità dell'impronta lasciata nel materiale. Per ogni misura si rileva anche il valore di questa stima, che sarà utile per l'analisi successiva.\n\nInfine, in quanto l'indentatore danneggiato permette di misurare con certezza solo una delle due diagonali (l'altra termina sullo spigolo danneggiato) si effettuano delle ulteriori misurazioni utilizzando per l'indentatore danneggiato due volte il valore della diagonale visibile. Anche queste misure saranno utili per l'analisi successiva.\n\nIn sintesi si eseguiranno 30 misurazioni (indentatore integro, indentatore danneggiato, indentatore danneggiato usando due volte la diagonale visibile) e per ogni misura si rileva anche il valore di stima della macchina.\n\nDi seguito la tabella che servirà per la raccolta dei dati, organizzata tenendo conto di quanto detto sopra (per le misurazioni si svegli di adottare la scala HV30).\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndf_a<-tibble(\n  material=1:10,\n  estimated_HV30_OK=NA,     #stima della macchina, indetatore integro\n  HV30_OK=NA,               #misura effettiva, indentatore integro\n  estimated_HV30_NOK=NA,    #stima della macchina, indentatore danneggiato\n  HV30_NOK=NA,              #misura effettiva estrapolando la posizione del vertice, indentatore danneggiato\n  estimated_HV30_dd=NA,   #stima della macchina, indentaore danneggiato\n  HV30_dd=NA             #misura effettiva usando due volte la diagonale visibile, indentatore danneggiato\n)\n\nwrite.csv(df_a,\"misure_HV_30.csv\")\n\ndf_a\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 10 × 7\n   material estimated_HV30_OK HV30_OK estimated_HV30_NOK HV30_NOK\n      <int> <lgl>             <lgl>   <lgl>              <lgl>   \n 1        1 NA                NA      NA                 NA      \n 2        2 NA                NA      NA                 NA      \n 3        3 NA                NA      NA                 NA      \n 4        4 NA                NA      NA                 NA      \n 5        5 NA                NA      NA                 NA      \n 6        6 NA                NA      NA                 NA      \n 7        7 NA                NA      NA                 NA      \n 8        8 NA                NA      NA                 NA      \n 9        9 NA                NA      NA                 NA      \n10       10 NA                NA      NA                 NA      \n# ℹ 2 more variables: estimated_HV30_dd <lgl>, HV30_dd <lgl>\n```\n\n\n:::\n:::\n\n\n\n### Taratura\n\nPer indagare la relazione tra la misura di durezza stimata dalla sola penetrazione dell'indentore (fornita dal durometro utilizzato in laboratorio) e la durezza misurata tenendo conto delle diagonali dell'impronta dell'indentatore (come indicato dalla UNI EN ISO 6507-1) è necessario sviluppare una campagna sperimentale atta a fornire le coppie di valori rappresentanti il misurando (durezza effettiva del materiale) e l'uscita dello strumento (la stima fornita dal durometro). Tali coppie di misure vanno raccolte in ordine casuale, per mitigare l'effetto degli ingressi modificanti.\n\nÈ quindi necessario raccogliere, per ciascuna scala di misura tra quelle scelte (HV5, HV10, HV20, HV30, HV50) e per ciascuono dei sei materiali scelti per eseguire la taratura (con durezza diversa), sia la durezza reale sia quella stimata.\n\nDi seguito la tabella che servirà per la raccolta dei dati, organizzata tenendo conto di quanto detto sopra.\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndf_b<-expand.grid(\n  Scale=c(\"HV5\",\"HV10\",\"HV20\",\"HV30\",\"HV50\"),\n  Material=1:6\n)%>%\n  relocate(Material,.before = Scale)%>%\n  mutate(\n    StdOrder = 1:n(),\n    RunOrder = sample(n()),\n    .before=Material\n  )%>%\n  mutate(\n    Estimated=NA,\n    Hardness=NA\n  )%>%\n  arrange(RunOrder)%>%\n  tibble()\n\nwrite.csv(df_b,\"misure_per_taratura.csv\")\n\ndf_b\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 30 × 6\n   StdOrder RunOrder Material Scale Estimated Hardness\n      <int>    <int>    <int> <fct> <lgl>     <lgl>   \n 1        4        1        1 HV30  NA        NA      \n 2       24        2        5 HV30  NA        NA      \n 3        8        3        2 HV20  NA        NA      \n 4        2        4        1 HV10  NA        NA      \n 5        3        5        1 HV20  NA        NA      \n 6       20        6        4 HV50  NA        NA      \n 7        7        7        2 HV10  NA        NA      \n 8       15        8        3 HV50  NA        NA      \n 9       10        9        2 HV50  NA        NA      \n10       23       10        5 HV20  NA        NA      \n# ℹ 20 more rows\n```\n\n\n:::\n:::\n\n\n\n\nPer la raccolta delle misure sono necessarie le seguenti fasi:\n\n1.  Scelta di 10 campioni di acciai ignoti\n2.  Preparazione dei campioni:\n*   I campioni devono essere accuratamente lucidati per ottenere una superficie liscia e priva di ossidazioni o impurità. Non sono prescritte grane specifiche nelle normative, ma si consiglia di utilizzare una sequenza di abrasivi da grana 120 a 1200. Se possibile lucidare a specchio (\\@ref(fig:preparazione_campioni))\n*   Pulizia con panno morbido e detergente per metallo per rimuovere polveri o residui.\n3.  Numerazione dei campioni: Indentificare i campioni numerandoli da 1 a 10 (\\@ref(fig:campioni)).\n4.  Montaggio indentatore Vickers danneggiato sulla macchina\n5.  Accensione durometro\n6.  Selezione dei parametri per la prova HV30\n7.  Impostare la messa a fuoco della lente (solo se necessario).\n8.  Esecuzione delle misure previste dalla tabella `df_a` relative all'indetatore danneggiato, estrapolando visivamente la posizione del vertice danneggiato (\\@ref(fig:estrapolazione))\n9.  Cambio indetatore, montaggio indentatore Vickers integro\n10. Esecuzione delle misure previste dalla tabella `df_b` reltaive all'indetatore integro \n10. Esecuzione delle misure previste dalla tabella `df_a`, cambiando coerentemente il metodo di prova (HV5,HV10,HV20,HV30,HV50) selezionando i parametri corretti (punto 6)\n11. Spegnimento durometro\n\n![Campione lucidato e non lucidato](images/preparazione_campioni.jpg){width=20% #fig:preparazione_campioni}\n\n![Campioni numerati](images/campioni.jpg){width=20% #fig:campioni}\n\n![Estrapolazione visiva della posizione del vertice danneggiato](images/estrapolazione.jpg){width=20% #fig:estrapolazione}\n\nPer eseguire le fasi che richiedono l'uso del durometro è possibile consultare il manuale d'uso del durometro EMCO TEST M4U 025 presente in laboratorio, tuttavia al fine di agevolare il procedimento si riportano sinteticamente le operazioni necessarie (valide per il durometro EMCO TEST M4U 02,(\\@ref(fig: durometro))5).\n\n![Durometro EMCO TEST M4U 02](images/durometro.jpg){width=30% #fig:durometro}\n\n### Montaggio e smontaggio indentatore\n\nPer montare l'indentatore (\\@ref(fig:indentatore)) sulla macchina:\n\n1.  Inserire l'indentatore dalla parte del gambo nell'apposito supporto a T. (\\@ref(fig:supporto))\n2.  Inserire l'indentatore nella sede della macchina.\n3.  Serrare il grano con la chiave esagonale apposita (\\@ref(fig:chiave_esagonale)).\n\nPer lo smontaggio seguire a ritroso le fasi sopra riportate.\n\nGli indentatori e gli utensili necessari sono presenti nell'apposita scatola, contrassegnati con la sigla HV e HV-rotto.\n\n![Indentatore](images/indentatore.jpg){width=30% #fig:indentatore}\n\n![Supporto a T](images/supportoT.jpg){width=30% #fig:supporto}\n\n![Serraggio con chiave esagonale](images/chiave_esagonale.jpg){width=25% #fig:chiave_esagonale}\n\n### Accensione, messa a fuoco e selezione dei parametri\n\nPer accendere la macchina: \n\n1. Azionare la chiave presente sul retro della stessa.\n2. Verificare che l'interruttore dedicato all'illuminazione per la lettura dell'impronta sia impostato su On\n2. Ad accensione avvenuta il display mostra un messaggio che chiede all’operatore se l’indentatore e l’ottica siano stati montati. Premere il tasto rosso f per confermare.\n\nPer impostare la messa a fuoco dell'immagine (da eseguire solo se necessario):\n\n1. Premere il tasto Code seguito da 1470, confermare con il tasto f\n2. Compare la scritta **SERVICE MODUS** , premere il tasto $+/-$ che cancella la posizione di fuoco precedente, confermare con f\n3. Premere il tasto Code\n4. Esegure una misura di durezza tramite il tasto $\\begin{array}{c}\\downarrow \\\\ - \\\\ \\uparrow\\end{array}$\n5. Una volta che il durometro passa all'ottica stabilire la posizione di fuoco attraverso i tasti  $\\leftarrow $ e  $\\rightarrow $.\n6. Misurare le diagonali e confermare con il tasto f, in questo modo viene anche memorizzata la nuova posizione di fuoco.\n\nPer selezionare i parametri e il tipo di prova di durezza, il durometro prevede una sezione in cui è possibile impostare diverse specifiche . Tuttavia, non è necessario modificare alcun parametro, eccetto il primo, poiché la sua impostazione richiama automaticamente i parametri per le prove previste dalla presente attività (secondo normativa). Quindi:\n\n1. Premere il tasto Code seguito da 1234, confermare con il tasto f. Si apre la sezione parametri (\\@ref(fig:parametri))\n2. Inserire il numero relativo al metodo di prova da eseguire in modo da impostare il parametro n. 1, questo numero è presente nella colonna CODE della tabella posta sul lato destro della macchina(\\@ref(fig:tabella)). Confermare con f. **Non modificare nessun altro parametro** \n3. Premere nuovamente code\n4. Accertarsi che nella schermata principale sia ora comparso il metodo di prova corretto.\n\nSi raccomanda di accertarsi che sulla macchina sia montata la lente specificata nei parametri della prova. Come detto in precedenza il significato di tutti i codici relativi ai parametri e i parametri stessi sono illustrati nel manuale d'uso presente in laboratorio.\n\n![Sezione di impostazione parametri](images/parametri.jpg){width=30% #fig:parametri}\n\n![Tabella codici di prova](images/tabella.jpg){width=30% #fig:tabella}\n\n### Misurazione \n\nPer eseguire una misura di durezza:\n\n1. Poggiare il provino sul piano di supporto della macchina\n2. ruotare il volantino portando in adesione il provino con l'elemento di contatto del durometro (\\@ref(fig:contatto))\n1. Premere il tasto  $\\begin{array}{c}\\downarrow \\\\ - \\\\ \\uparrow\\end{array}$ che avvia il ciclo di misura\n2. Attendere la fine della prova, quindi che compaia l'immagine dell imnpronta sullo schermo, annotare la stima fornita dalla macchina.\n3. Azzerare la posizione del regolo portando a contatto i due corsoi del calibro, premere il tasto f (solo per prima misura dopo accensione),(\\@ref(fig:azzeramento_regolo))\n4. Allineare la linea presente su uno dei due corsoi con una delle diagonali dell'impronta, in modo da fissare l'orientamento corretto per la misurazione (\\@ref(fig:orientamento)) \n5. Mantendendo l'orientamento ottenuto al punto precedente regolare attraverso i due pomelli presenti sul calibro la posizione dei due corsoi, in modo che le linee presenti sugli stessi combacino con i vertici della diagonale opposta a quella usata da riferimento al punto 4. Confermare con il tasto f.(\\@ref(fig:misura))\n6. Ripetere i punti 4,5 per l'altra diagonale\n7. Annotare la misura che compare a display\n8. Premere il tasto f\n\nPer le misure che prevendo di usare due volte la stessa diagonale (quella chiaramente visibile dell'indentatore rotto) rilevare due volte la stessa diagonale (dopo aver effettuato i passi 4. e 5 premere nuovamente il tasto f senza cambiare la posizione dei corsoi)\n\n![Provino a contatto](images/contatto.jpg){width=30% #fig:provino}\n\n\n![Azzeramento del regolo](images/azzeramento_regolo.jpg){width=30% #fig:zeroregolo}\n\n![Orientamento regolo](images/orientamento.jpg){width=30% #fig:orientamento}\n\n![Misura della diagonale](images/misura.jpg){width=30% #fig:misura}\n\n## Raccolta dei dati\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndf_a$estimated_HV30_OK=c(591,205,209,262,318,578,206,156,624,581)\ndf_a$HV30_OK=c(662,242,262,302,330,641,244,165,668,651)\ndf_a$estimated_HV30_NOK = c(612,212,217,307,339,629,216,157,615,596)\ndf_a$HV30_NOK = c(676,259,259,306,352,660,244,164,659,625)\ndf_a$estimated_HV30_dd=c(612,219,218,297,337,621,218,157,618,596)\ndf_a$HV30_dd=c(648,256,253,297,351,652,247,166,659,635)               \n\ndf_a\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 10 × 7\n   material estimated_HV30_OK HV30_OK estimated_HV30_NOK HV30_NOK\n      <int>             <dbl>   <dbl>              <dbl>    <dbl>\n 1        1               591     662                612      676\n 2        2               205     242                212      259\n 3        3               209     262                217      259\n 4        4               262     302                307      306\n 5        5               318     330                339      352\n 6        6               578     641                629      660\n 7        7               206     244                216      244\n 8        8               156     165                157      164\n 9        9               624     668                615      659\n10       10               581     651                596      625\n# ℹ 2 more variables: estimated_HV30_dd <dbl>, HV30_dd <dbl>\n```\n\n\n:::\n:::\n\n\n\n\n# Analisi differenze indentatore rotto/indentore integro\n\nSi converte la tabella in formato tidy, più maneggevole, riordinandola in modo da avere tutte le misure in un'unica colonna `durezza` (si rinominano le colonne e non si tiene conto delle misure doppia diagonale):\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndfv <- df_a%>%\n  select(material:HV30_NOK)%>%\n  rename(\n    stima_NOK=estimated_HV30_NOK,\n    stima_OK=estimated_HV30_OK\n    )%>% \n  relocate(\n    HV30_NOK,\n    stima_OK,\n    stima_NOK,\n    .after = HV30_OK,\n  )%>%\n  pivot_longer(-material, names_sep=\"_\", names_to = c(\"misura\",\"ok\"), values_to=\"durezza\") %>% \n  mutate(ok=ifelse(ok==\"OK\",\"integro\",\"rotto\"))\n\ndfv\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 40 × 4\n   material misura ok      durezza\n      <int> <chr>  <chr>     <dbl>\n 1        1 HV30   integro     662\n 2        1 HV30   rotto       676\n 3        1 stima  integro     591\n 4        1 stima  rotto       612\n 5        2 HV30   integro     242\n 6        2 HV30   rotto       259\n 7        2 stima  integro     205\n 8        2 stima  rotto       212\n 9        3 HV30   integro     262\n10        3 HV30   rotto       259\n# ℹ 30 more rows\n```\n\n\n:::\n:::\n\n\n\nConfrontiamo tutti i dati: non si evidenzia nessuna differenza significativa, perché la variabilità del materiale **maschera** le variabilità delle misure.\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndfv %>% \n  ggplot(aes(x=misura, y=durezza, color=ok)) +\n  geom_boxplot() +\n  labs(x=\"Misura\", y=\"Durezza\", color=\"Penetratore\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){fig-align='center' width=16cm}\n:::\n:::\n\n\n\nOsserviamo la relazione tra stima e durezza, separatamente per penetratore: sembrano essere differenti sia l'intercetta che la pendenza.\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndfv %>%\n  pivot_wider(names_from = misura, values_from = durezza) %>% \n  ggplot(aes(x=HV30, y=stima, color=ok)) + \n  geom_point() + \n  geom_smooth(method=\"lm\", formula=y~x) +\n  labs(color=\"penetratore\") \n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){fig-align='center' width=16cm}\n:::\n:::\n\n\n\nOsserviamo invece la relazione tra le misure fatte con indentatore rotto e indentatore integro: se non ci fosse differenza sarebbero allineate sulla rettadiagonale con equazione $y=x$. Si osserva che i punti corrispondenti al HV30 effettivamente hanno una regressione che corrisponde alla diagonale, mentre per i punti corrispondenti alla stima la regressione è al di sopra della diagonale e i punti sono consistentemente al di sopra di essa, cioè la stima dà una durezza maggiore per l'indentatore rotto che per quello integro.\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndfv %>%\n  pivot_wider(names_from = ok, values_from = durezza) %>% \n  ggplot(aes(x=integro, y=rotto, color=misura)) + \n  geom_abline(slope=1, intercept=0, color=\"red\", lty=2) +\n  geom_point() + \n  geom_smooth(method=\"lm\", formula=y~x)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){fig-align='center' width=16cm}\n:::\n:::\n\n\n## Discussione risultati\n\nEffettuo i T-test per HV30 e per stima, in un colpo solo: prima separo su due colonne le misure per penetratori integri e rotti, poi spezzo la tabella in due con `split`, e infine applico la funzione `t.test` a ciascun sottoinsieme mediante `map`:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndfv %>% pivot_wider(names_from = ok, values_from = durezza) %>% \n split(.$misura) %>% \n map(~t.test(.x$integro, .x$rotto, paired = T))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$HV30\n\n\tPaired t-test\n\ndata:  .x$integro and .x$rotto\nt = -0.78962, df = 9, p-value = 0.4501\nalternative hypothesis: true mean difference is not equal to 0\n95 percent confidence interval:\n -14.300003   6.900003\nsample estimates:\nmean difference \n           -3.7 \n\n\n$stima\n\n\tPaired t-test\n\ndata:  .x$integro and .x$rotto\nt = -2.879, df = 9, p-value = 0.01821\nalternative hypothesis: true mean difference is not equal to 0\n95 percent confidence interval:\n -30.357586  -3.642414\nsample estimates:\nmean difference \n            -17 \n```\n\n\n:::\n:::\n\n\n\nIl risultato ottenuto suggerisce di accettare l'ipotesi nulla: non c'è differenza a livello statistico nell'utilizzare un penetratore o l'altro.\n\nQuesto fatto può parere inaspettato, in quanto il penetratore si sa essere danneggiato. Tuttavia sta ad indicare proprio che nonostante esso sia danneggiato *nel campo di applicazione nel quale si sono svolte le misure* questo fatto non è statisticamente rilevante.\n\n\n# Analisi per taratura\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndf_b<-df_b%>%\n  arrange(StdOrder)%>%\n  mutate(\n    Estimated=c(692,690,516,634,630,343,310,262,318,370,223,217,185,218,209,\n                610,641,481,589,680,304,290,238,297,340,235,229,173,212,205),\n    Hardness=c(709,709,668,680,656,351,341,333,330,341,294,254,261,251,241,\n                671,675,642,646,627,308,317,296,294,295,308,286,265,261,249)\n    \n  )\n\ndf_b\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 30 × 6\n   StdOrder RunOrder Material Scale Estimated Hardness\n      <int>    <int>    <int> <fct>     <dbl>    <dbl>\n 1        1       13        1 HV5         692      709\n 2        2        4        1 HV10        690      709\n 3        3        5        1 HV20        516      668\n 4        4        1        1 HV30        634      680\n 5        5       22        1 HV50        630      656\n 6        6       28        2 HV5         343      351\n 7        7        7        2 HV10        310      341\n 8        8        3        2 HV20        262      333\n 9        9       17        2 HV30        318      330\n10       10        9        2 HV50        370      341\n# ℹ 20 more rows\n```\n\n\n:::\n:::\n",
    "supporting": [
      "index_files\\figure-html"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}